# 真·三十天
## a20地址线

欢迎来到真三十天第六个视频

本期我们来讨论一下关于A20地址线的问题

首先我们来看一下这张图片

这是取自《汇编语言：从实模式到保护模式》194页的一张图

这本书从第193页开始的11.5小节开始就是讲解关于A20地址线的相关历史

我这里只取我们会用到的信息简单来讲解一下

这张图上面画的是一个80286cpu

它和早期推出的8086cpu有一个很大的区别是它有24根地址线

而8086只有20根地址线

所以8086实际上能只用的内存范围是 0x00000 ～ 0xFFFFF

而我们知道一个内存地址是由段基址和偏移决定的

比如段基址是A偏移是B

那么在实模式下要访问的地址是 (A<<4) + B

如果这个地址超过了0xFFFFF，在8086下的处理方式就是回卷到0地址处

比如你访问了0x100000，就相当于访问了0x00000

许多早期在8086的程序利用了这样的特性

但是80286出现之后是有能力访问0xFFFFF以上的地址的

于是IBM在主板上把键盘控制器的0x60端口的引脚用一个与门和a20相连

这样如果0x60输出0，那么A20就恒为0

这样就可以模拟8086的那种特性了
